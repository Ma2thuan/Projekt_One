@{
    ViewBag.Title = "Monthly Passbooks opening/closing report";
    Layout = "~/Views/Shared/_MainLayout.cshtml";
}
<div class="container mt-4">
    <h2>@ViewBag.Title</h2>

    <form method="get" action="@Url.Action("MonthlyReport", "Reports")">
        <div class="form-row">
            <div class="form-group col-md-6">
                <label for="reportMonth">Month:</label>
                <input type="month" id="reportMonth" name="reportMonth" class="form-control" required />
            </div>
            <div class="form-group col-md-6">
                <label for="savingsType">Savings Type:</label>
                @Html.DropDownList("savingsType", ViewBag.SavingsTypes as SelectList, "Select Savings Type", new { @class = "form-control", @required = "required" })
            </div>
        </div>
        <button type="submit" class="btn btn-primary">Lọc</button>
    </form>

    @if (ViewBag.ReportData != null)
    {
        <h2 class="text-center">Report for: @ViewBag.ReportMonth</h2>
        <h3>Savings Type: @ViewBag.SelectedSavingsType</h3>

        <table id="monthlyReportTable" class="table table-striped table-bordered">
            <thead>
                <tr>
                    <th>List</th>
                    <th>Savings Type</th>
                    <th>Day</th>
                    <th>Total Revenue</th>
                    <th>Total Expenditure</th>
                    <th>Difference</th>
                </tr>
            </thead>
            <tbody>
                @{
                    int count = 1;
                    var reportData = (List<Projekt_1.Controllers.ReportsController.ReportData>)ViewBag.ReportData;
                    foreach (var item in reportData)
                    {
                        <tr>
                            <td>@count</td>
                            <td>@item.SavingsType</td>
                            <td>@item.Date.Value.ToString("dd/MM/yyyy")</td>
                            <td>@item.TotalIncome</td>
                            <td>@item.TotalExpense</td>
                            <td>@item.Difference</td>
                        </tr>
                        count++;
                    }
                }
            </tbody>
        </table>
    }

    @section Scripts {
        <script src="https://cdn.datatables.net/1.11.5/js/jquery.dataTables.min.js"></script>
        <script src="https://cdn.datatables.net/1.11.5/js/dataTables.bootstrap4.min.js"></script>
        <script>
            $(document).ready(function () {
                $('#monthlyReportTable').DataTable({
                    "paging": true,
                    "searching": true,
                    "ordering": true,
                    "info": true
                });
            });
        </script>
    }
</div>